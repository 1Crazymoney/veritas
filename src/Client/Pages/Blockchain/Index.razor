@page "/blockchain"
@using Application.Dto

<AppSection Class="h-full w-full flex flex-col md:flex-row-reverse items-start cursor-crosshair select-none p-3 md:p-5">
    <div class="w-full text-start md:text-center space-y-2">
        <h2 class="hidden md:block font-archyedt text-3xl" @onclick="@(() => BlockList.AddBlock(BlockDto.RandomBlockDto()))">
            უახლესი ბლოკები
        </h2>

        <BlockList @ref="@BlockList" Blocks="@Blocks"/>
    </div>

    <hr class="border-s h-auto md:h-full w-full md:w-auto"/>

    <div class="w-full text-start md:text-center space-y-2">
        <h2 class="font-archyedt text-3xl" @onclick="@(() => VoteList.AddTransaction(VoteDto.RandomVoteDto()))">
            უახლესი ხმები
        </h2>
        <VoteList @ref="@VoteList" Votes="@Votes"/>
    </div>
</AppSection>


@code
{
    private BlockList BlockList { get; set; } = default!;
    private VoteList VoteList { get; set; } = default!;

    private List<BlockDto> Blocks { get; set; } = [];
    private List<VoteDto> Votes { get; set; } = [];

    protected override void OnInitialized()
    {
        Blocks = Enumerable.Range(0, 10)
            .Select(_ => BlockDto.RandomBlockDto())
            .ToList();

        Votes = Enumerable.Range(0, 10)
            .Select(_ => VoteDto.RandomVoteDto())
            .ToList();

        base.OnInitialized();
    }
}